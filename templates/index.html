{% extends "base.html" %}

{% block title %}Procur{% endblock %}

{% block content %}

{% if announcements %}
<div class="mb-8">
    {% for ann in announcements %}
    <div class="alert {{ 'alert-info' if not ann.is_pinned else 'alert-warning' }} shadow-lg">
        <div>
            <i class="fas fa-bullhorn"></i>
            <div>
                <h3 class="font-bold">{{ ann.title }}</h3>
                <div class="text-sm">{{ ann.body }}</div>
            </div>
        </div>
    </div>
    {% endfor %}

    <div class="divider"></div>


    {% endif %}

    <div
        class="hero min-h-[80vh] bg-gradient-to-br from-primary via-primary-focus to-secondary text-primary-content rounded-3xl mb-12 relative overflow-hidden animate-bounce-in">
        <div class="hero-overlay bg-gradient-to-br from-primary/20 to-secondary/20 rounded-3xl"></div>


        <div class="absolute inset-0 overflow-hidden">
        </div>

        <div class="hero-content text-center relative z-10">
            <div class="max-w-5xl">
                <div class="mb-8">
                    <div class="text-6xl mb-4 animate-bounce">
                        <i class="fas fa-calendar-star"></i>
                    </div>
                    <h1
                        class="text-6xl font-extrabold mb-6 bg-gradient-to-r from-white to-primary-content bg-clip-text text-transparent animate-fade-in">
                        Procur
                        <span class="block text-5xl mt-2">Inter-School Event Management Portal</span>
                    </h1>
                </div>
                <p class="text-xl opacity-90 mb-8 max-w-2xl mx-auto leading-relaxed animate-fade-in"
                    style="animation-delay: 0.3s;">
                    Efficiently manage and participate in interschool events. Stay organized, connected, and never miss
                    an opportunity to showcase your school's talent.
                </p>


                {% if not current_user.is_authenticated %}
                <div class="flex flex-col sm:flex-row gap-4 justify-center animate-fade-in"
                    style="animation-delay: 0.6s;">
                    <a href="{{ url_for('register') }}"
                        class="btn btn-primary btn-lg rounded-full shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 group">
                        <i class="fas fa-rocket mr-2 group-hover:rotate-12 transition-transform"></i>Get Started
                    </a>
                    <a href="{{ url_for('events') }}"
                        class="btn btn-outline btn-lg rounded-full border-white/30 hover:bg-white hover:text-primary transition-all duration-300 group">
                        <i class="fas fa-search mr-2 group-hover:scale-110 transition-transform"></i>Browse Events
                    </a>
                </div>
                {% else %}
                <div class="flex flex-col sm:flex-row gap-4 justify-center animate-fade-in"
                    style="animation-delay: 0.6s;">
                    <a href="{{ url_for('dashboard') }}"
                        class="btn btn-primary btn-lg rounded-full shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 group">
                        <i class="fas fa-tachometer-alt mr-2 group-hover:rotate-12 transition-transform"></i>Go to
                        Dashboard
                    </a>
                    <a href="{{ url_for('events') }}"
                        class="btn btn-outline btn-lg rounded-full border-white/30 hover:bg-white hover:text-primary transition-all duration-300 group">
                        <i class="fas fa-calendar mr-2 group-hover:scale-110 transition-transform"></i>Browse Events
                    </a>
                </div>
                {% endif %}
            </div>
        </div>


    </div>


    {% if upcoming_events %}
    <div class="mb-16 animate-fade-in">
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
            <div>
                <h2 class="text-4xl font-bold text-primary mb-2">Upcoming Events</h2>
                <p class="text-lg opacity-70">Don't miss out on these exciting opportunities</p>
            </div>
            <a href="{{ url_for('events') }}" class="btn btn-primary rounded-full group">
                <i class="fas fa-arrow-right mr-2 group-hover:translate-x-1 transition-transform"></i>View All Events
            </a>
        </div>


        <div class="carousel carousel-center max-w-full p-4 space-x-6 bg-base-200 rounded-3xl shadow-xl">
            {% for event in upcoming_events %}
            <div class="carousel-item">
                <div
                    class="card w-80 bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:scale-105 event-card">
                    <div class="card-body">
                        <div class="flex justify-between items-start mb-3">
                            <div class="badge badge-primary badge-lg">{{ event.category|title }}</div>
                            <div class="text-right">
                                <div class="text-sm font-semibold text-primary">{{ event.event_date.strftime('%b') }}
                                </div>
                                <div class="text-2xl font-bold">{{ event.event_date.strftime('%d') }}</div>
                            </div>
                        </div>
                        <h3 class="card-title text-lg mb-2">{{ event.title }}</h3>
                        <p class="opacity-70 text-sm leading-relaxed">{{ event.description[:100] }}{% if
                            event.description|length > 100 %}...{% endif %}</p>

                        <div class="divider my-3"></div>

                        <div class="space-y-2 text-sm">
                            <div class="flex items-center text-base-content/70">
                                <i class="fas fa-map-marker-alt mr-3 w-4"></i>
                                <span>{{ event.location }}</span>
                            </div>
                            <div class="flex items-center text-base-content/70">
                                <i class="fas fa-clock mr-3 w-4"></i>
                                <span>{{ event.event_date.strftime('%I:%M %p') }}</span>
                            </div>
                            <div class="flex items-center text-base-content/70">
                                <i class="fas fa-users mr-3 w-4"></i>
                                <span>{{ event.registration_count }}/{{ event.max_participants }} participants</span>
                            </div>
                        </div>

                        <div class="card-actions justify-end mt-4">
                            <a href="{{ url_for('event_detail', event_id=event.id) }}"
                                class="btn btn-primary btn-sm rounded-full group">
                                <i class="fas fa-eye mr-1 group-hover:scale-110 transition-transform"></i>Details
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}


    {% if ongoing_events %}
    <div class="mb-16 animate-fade-in">
        <div class="text-center mb-8">
            <div class="badge badge-warning badge-lg mb-3 animate-pulse">
                <i class="fas fa-broadcast-tower mr-2"></i>LIVE NOW
            </div>
            <h2 class="text-3xl font-bold text-warning mb-2">Currently Ongoing Events</h2>
            <p class="text-lg opacity-70">Join these events happening right now!</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {% for event in ongoing_events %}
            <div
                class="card bg-gradient-to-br from-warning/5 to-warning/10 shadow-xl border-2 border-warning/30 hover:shadow-2xl transition-all duration-300 relative overflow-hidden event-card">
                <div class="card-body relative z-10">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-2">
                            <div class="badge badge-warning animate-pulse">
                                <i class="fas fa-circle mr-1 text-xs"></i>LIVE
                            </div>
                            <div class="badge badge-outline">{{ event.category|title }}</div>
                        </div>
                        <div class="text-right text-sm">
                            <div class="font-semibold text-warning">Started</div>
                            <div>{{ event.event_date.strftime('%I:%M %p') }}</div>
                        </div>
                    </div>

                    <h3 class="card-title text-xl mb-3">{{ event.title }}</h3>
                    <p class="opacity-70 leading-relaxed">{{ event.description[:150] }}{% if event.description|length >
                        150 %}...{% endif %}</p>

                    <div class="divider my-4"></div>

                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="flex items-center text-base-content/70">
                            <i class="fas fa-map-marker-alt mr-2 w-4"></i>
                            <span>{{ event.location }}</span>
                        </div>
                        <div class="flex items-center text-base-content/70">
                            <i class="fas fa-users mr-2 w-4"></i>
                            <span>{{ event.registration_count }} participants</span>
                        </div>
                    </div>

                    <div class="card-actions justify-end mt-6">
                        <a href="{{ url_for('event_detail', event_id=event.id) }}"
                            class="btn btn-warning rounded-full group">
                            <i class="fas fa-eye mr-2 group-hover:scale-110 transition-transform"></i>Join Event
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    {% endblock %}